<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Queen of XO</title>

  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <!-- cache-bust -->
  <link rel="stylesheet" href="styles.css?v=7" />
</head>

<body>
  <div class="app">
    <div class="header">
      <h1>Крестики-нолики</h1>
      <p>Победите — получите промокод на скидку</p>
    </div>

    <div id="status">Ваш ход</div>

    <!-- Игровая карточка/поле -->
    <div id="board">
      <div id="boardInner">
        <button class="cell" data-idx="0" aria-label="Клетка 1"></button>
        <button class="cell" data-idx="1" aria-label="Клетка 2"></button>
        <button class="cell" data-idx="2" aria-label="Клетка 3"></button>
        <button class="cell" data-idx="3" aria-label="Клетка 4"></button>
        <button class="cell" data-idx="4" aria-label="Клетка 5"></button>
        <button class="cell" data-idx="5" aria-label="Клетка 6"></button>
        <button class="cell" data-idx="6" aria-label="Клетка 7"></button>
        <button class="cell" data-idx="7" aria-label="Клетка 8"></button>
        <button class="cell" data-idx="8" aria-label="Клетка 9"></button>
      </div>

      <div class="actions">
        <button id="resetBtn" class="btn btn-primary" type="button">Начать заново</button>
      </div>

      <div id="legend" class="footer-text">
        Вы играете <b style="color:#d64b7c;">X</b>, компьютер — <b style="color:#4b63d1;">O</b>.
      </div>
    </div>
  </div>

  <!-- Toast (если ваш app.js его использует) -->
  <div id="toast" class="hidden"></div>

  <!-- ===== WIN OVERLAY (как у вас в app.js) ===== -->
  <div id="winOverlay" class="hidden">
    <div id="winCard">
      <h2 id="winTitle">Победа!</h2>
      <p>Ваш промокод на скидку:</p>

      <div id="promoCode">00000</div>

      <div id="ctaRow">
        <button id="copyBtn" class="btn btn-secondary" type="button">Скопировать</button>
        <button id="playAgainBtn" class="btn btn-primary" type="button">Сыграть ещё раз</button>
      </div>

      <p style="margin-top:12px; opacity:.7;">
        Промокод отображается один раз. Скопируйте и сохраните.
      </p>

      <button id="closeWinBtn" class="hidden" type="button">Закрыть</button>
    </div>
  </div>

  <!-- ===== LOSE OVERLAY (если добавите поддержку в app.js) ===== -->
  <div id="loseOverlay" class="hidden">
    <div id="loseCard">
      <h2 id="loseTitle">Не расстраивайтесь!</h2>
      <p>В следующий раз точно получится.</p>

      <div class="ctaRow">
        <button id="loseAgainBtn" class="btn btn-primary" type="button">Сыграть ещё раз</button>
      </div>
    </div>
  </div>

  <!-- cache-bust -->
  <script src="app.js?v=7" defer></script>

  <script>
    // Telegram WebApp helpers (безопасно, если открыто вне Telegram)
    try {
      if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
      }
    } catch (e) {}
  </script>
</body>
</html>
